sources:
    patientsinfo:
        kind: "alloydb-postgres"
        project: "alloydb-medagent-mcptoolbox"
        region: "us-central1"
        cluster: "vector-cluster"
        instance: "vector-instance"
        database: "postgres"
        user: "postgres"
        password: "alloydb12345"


tools:
  get-patientsinfo:
    kind: postgres-sql
    source: patientsinfo
    description: Get the patients info 
    parameters:
      - name: description
        type: string
        description: A description of the patient info to search for
    statement: |
      SELECT * FROM patientsinfo
      WHERE diagnosis = $1
      ORDER BY text_embeddings <=> CAST(embedding('text-embedding-005', $1) AS vector(768));
